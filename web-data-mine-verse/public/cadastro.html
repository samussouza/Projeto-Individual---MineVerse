<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>
  <link rel="stylesheet" href="css\cadastro.css">

</head>

<body>
  <a href="login.html" class="loginBotao">Já tem cadastro?</a>

  <div class="container">
    <h2>Cadastro</h2>

    <!--Tag formulario-->
    <form id="formularioCadastro">

      Nome:
      <input type="text" id="input_nome">

      CPF:
      <input type="text" id="input_cpf">

      Email:
      <input type="text" id="input_email">

      Senha:
      <input type="text" id="input_senha">

      Confirmar senha:
      <input type="text" id="input_confirmar_senha">

      <button onclick="cadastrar()">Cadastrar</button>

      <p id="exibir">
        <span id="mensagem"></span>
      </p>

    </form>


  </div>
</body>

</html>

<script>

  function cadastrar() {
    var CampoSenha = input_senha.value;
    var CampoNome = input_nome.value;
    var CampoCPF = input_cpf.value;
    var CampoConfirmarSenha = input_confirmar_senha.value;
    var CampoEmail = input_email.value;

    if (CampoCPF == "" || CampoNome == "" || CampoEmail == "" || CampoSenha == "" || CampoConfirmarSenha == "") {

      alert("Erro ! Cerfitique-se que todos os campos estão preenchidos.")
      return false
    }

    // else if (CampoCPF.length <= 10 || CampoCPF.length >= 12) {
    //     alert("CPF inválido ! O CPF deve conter 11 digítos.")
    //     return false;
    // }
    // else if (CampoEmail.indexOf("@") < 0 && CampoEmail.indexOf(".") < 0) {
    //     alert("Email inválido! O email deve conter '@' e '.'")
    //     return

    // } else if (CampoSenha.length < 8) {
    //     alert("Senha inválida ! A senha deve conter pelo menos 8 digítos")
    //     return false;
    // }
    // else if (!/[A-Z]/.test(CampoSenha)) {
    //     alert("Senha inválida! A senha deve cConter pelo menos uma letra MAIÚSCULA.");
    //     return false;
    // }
    // else if (!/[0-9]/.test(CampoSenha)) {
    //     alert("Senha inválida! A senha deve conter pelo menos um número de 0 a 9.");
    //     return false;
    // }
    // else if (!/[@#]/.test(CampoSenha)) {
    //     alert("Senha inválida! A senha deve conter pelo menos um caractere especial '@' ou '#'.");
    //     return false;
    // }
    // else if (CampoConfirmarSenha !== CampoSenha) {
    //     alert("Senha Inválida ! Cerfique-se que as senhas informadas são IGUAIS.")
    //     return
    // }



    fetch("/usuarios/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        nomeServer: CampoNome,
        emailServer: CampoEmail,
        senhaServer: CampoSenha,
        cpfServer: CampoCPF,
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {
          var exibir = document.getElementById("exibir");
          exibir.style.display = "block";

          var mensagem = document.getElementById("mensagem");
          mensagem.innerHTML =
            "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

          setTimeout(() => {
            window.location = "./login.html";
          }, 5000);


        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);

      });

    return false;

  }
















</script>